@model PFG.Inventory.Web.ViewModels.AccountListViewModel
@{
    //使用者管理
    var title = MenuUtils.GetPageTitle(HttpContext.Current);
    UserModel userModel = ViewBag.UserModel;
}



@section BreadCrumbs{
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
        </script>
        <ul class="breadcrumb">
            <li>
                <i class="icon-wrench"></i>
                <a href="@Url.Action("Index")">系統設定</a>
            </li>
            <li class="active">
                <i class="icon-group"></i>
                @title
            </li>
        </ul>
    </div>
}

@section PageHeader{

}

<div id="item-index">
    <h3 class="header smaller lighter blue">@title</h3>
    <p>
        @if (userModel.Operation.HasFlag(EnumOperation.Query))
        {
            <button id="queryBtn" class="btn btn-white btn-info btn-bold">
                <i class="ace-icon fa fa-search bigger-120 blue"></i>
                查詢
            </button>

            <button id="resetBtn" class="btn btn-white btn-default btn-bold">
                <i class="ace-icon fa fa-refresh bigger-120 grey"></i>
                重設
            </button>

        }
        
        @if (userModel.Operation.HasFlag(EnumOperation.Create))
        {
            <button id="createBtn" class="btn btn-white btn-success btn-bold">
                <i class="ace-icon fa fa-plus-circle bigger-120 green"></i>
                新增
            </button>
        }
    </p>


    <div class="row">
        <div class="col-sm-12">
            <div class="widget-box">
                <div class="widget-header widget-header-flat">
                    <h4 class="widget-title smaller">
                        <i class="ace-icon fa fa-quote-left smaller-80"></i>
                        查詢條件
                    </h4>
                    <div class="widget-toolbar">
                        <a href="#" data-action="collapse">
                            <i class="fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main">
                        @using (Ajax.BeginForm("Query", null, SiteLibrary.GetDefaultAjaxOptions(), new { @id = "query-form" }))
                        {
                            <div class="row">
                                <div class="col-xs-2">
                                    @Html.LabelFor(x => x.Parameter.Account)
                                </div>
                                <div class="col-xs-4">
                                    @Html.TextBoxFor(x => x.Parameter.Account, new { @class = "fecthAccountID", @placeholder = "" })
                                </div>
                                <div class="col-xs-offset-6">

                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <hr />
            <div id="divGridView">

            </div>
        </div>
    </div>

</div>

<div id="item-detail" style="display:none">
</div>

@section Scripts{
    <script>
        $(function () {

            //Query
            $("#queryBtn").click(function (e) {
                $("#query-form").submit();
                e.preventDefault();
            });

            //Create
            $("#createBtn").click(function (e) {
                var btn = $(this);
                url = '@Url.Action("Create")';
                commonjs.goToNextPage(btn, url);
                e.preventDefault();
            });

            //Reset
            $("#resetBtn").click(function (e) {
                commonjs.resetForm($("#query-form"));
            });

            //Invoke
            $("#queryBtn").trigger("click");
        });


    </script>

}
